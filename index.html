<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real Estate Calculator</title>
    <style>
      :root {
        --bg: #f5f5f5;
        --card: #ffffff;
        --text: #111827;
        --muted: #6b7280;
        --border: #e5e7eb;
        --primary: #4285f4;
        --primaryHover: #357ae8;
        --shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        --radius: 10px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
      }

      .page {
        min-height: 100vh;
        padding: 24px;
        display: flex;
        align-items: flex-start;
        justify-content: center;
      }

      .grid {
        width: 100%;
        max-width: 1200px;
        display: grid;
        grid-template-columns: 1fr 1fr 1.15fr;
        gap: 20px;
        align-items: start;
      }

      @media (max-width: 1100px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 18px;
      }

      .card h2 {
        margin: 0 0 12px 0;
      }

      .subtle {
        margin: -6px 0 14px 0;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .form-group {
        margin-bottom: 12px;
      }

      label {
        display: block;
        font-weight: 700;
        margin-bottom: 6px;
      }

      input[type="number"] {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border);
        border-radius: 8px;
        font-size: 1rem;
      }

      input[readonly] {
        background: #f9fafb;
        color: #374151;
      }

      button {
        width: 100%;
        padding: 10px 12px;
        border: none;
        border-radius: 8px;
        background: var(--primary);
        color: white;
        font-size: 1rem;
        cursor: pointer;
      }

      button:hover {
        background: var(--primaryHover);
      }

      .result {
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border);
        color: #111827;
        line-height: 1.35;
      }

      /* Repairs table */
      .repair-table {
        width: 100%;
        border-collapse: collapse;
        overflow: hidden;
        border-radius: 8px;
        border: 1px solid var(--border);
      }

      .repair-table th,
      .repair-table td {
        padding: 8px 6px;
        text-align: center;
        border-bottom: 1px solid var(--border);
        font-size: 0.95rem;
      }

      .repair-table th {
        background: #f3f4f6;
      }

      .repair-table td:first-child,
      .repair-table th:first-child {
        text-align: left;
        padding-left: 10px;
        width: 46%;
      }

      .repair-total {
        margin-top: 12px;
        font-weight: 700;
        text-align: right;
      }
    </style>
  </head>

  <body>
    <main class="page">
      <div class="grid">
        <!-- Left: ARV Calculator -->
        <section class="card" aria-labelledby="arv-title">
          <h2 id="arv-title">ARV Calculator</h2>
          <p class="subtle">
            Enter 1–3 comps. We’ll average them and fill ARV for MAO.
          </p>

          <div class="form-group">
            <label for="comp1">Comparable Sale 1 ($)</label>
            <input type="number" id="comp1" min="0" placeholder="e.g. 340000" />
          </div>

          <div class="form-group">
            <label for="comp2">Comparable Sale 2 ($)</label>
            <input type="number" id="comp2" min="0" placeholder="e.g. 355000" />
          </div>

          <div class="form-group">
            <label for="comp3">Comparable Sale 3 ($)</label>
            <input type="number" id="comp3" min="0" placeholder="e.g. 360000" />
          </div>

          <button type="button" id="estimateArvBtn">Estimate ARV</button>

          <div class="result" id="arvResult" aria-live="polite"></div>
        </section>

        <!-- Middle: Wholesaling (Assignment) Calculator -->
        <section class="card" aria-labelledby="wholesale-title">
          <h2 id="wholesale-title">Wholesaling Calculator</h2>
          <p class="subtle">
            <strong>MAO = (ARV × 0.7) - Repairs</strong><br />
            <strong>End Buyer Price = Contract Price + Assignment Fee</strong><br />
            <strong>Profit = Assignment Fee</strong>
          </p>

          <div class="form-group">
            <label for="arv">After Repair Value (ARV) ($)</label>
            <input
              type="number"
              id="arv"
              min="0"
              placeholder="Filled by ARV calc (or enter manually)"
            />
          </div>

          <div class="form-group">
            <label for="repairCosts">Repairs ($)</label>
            <input
              type="number"
              id="repairCosts"
              min="0"
              placeholder="Auto-calculated"
              readonly
            />
          </div>

          <div class="form-group">
            <label for="contractPrice">Contract Price ($)</label>
            <input
              type="number"
              id="contractPrice"
              min="0"
              placeholder="What you put it under contract for"
            />
          </div>

          <div class="form-group">
            <label for="endBuyerPrice">End Buyer Price ($)</label>
            <input
              type="number"
              id="endBuyerPrice"
              min="0"
              placeholder="What your cash buyer pays"
            />
          </div>

          <button type="button" id="calcWholesaleBtn">Calculate</button>

          <div class="result" id="result" aria-live="polite"></div>
        </section>

        <!-- Right: Repair Costs Checklist -->
        <section class="card" aria-labelledby="repairs-title">
          <h2 id="repairs-title">Repair Cost Checklist</h2>
          <p class="subtle">Select condition per line item to estimate repairs.</p>

          <table class="repair-table" id="repairTable">
            <thead>
              <tr>
                <th>Item</th>
                <th>Good</th>
                <th>Fine</th>
                <th>Bad</th>
              </tr>
            </thead>
            <tbody>
              <!-- Rows inserted by JS -->
            </tbody>
          </table>

          <div class="repair-total">
            Total Estimated Repairs: $<span id="repairTotal">0</span>
          </div>
        </section>
      </div>
    </main>

    <script>
      const repairItems = [
        { label: "Roof", good: 0, fine: 3000, bad: 8000 },
        { label: "HVAC", good: 0, fine: 2000, bad: 6000 },
        { label: "Plumbing", good: 0, fine: 1500, bad: 4000 },
        { label: "Electrical", good: 0, fine: 1200, bad: 3500 },
        { label: "Kitchen Remodel", good: 0, fine: 5000, bad: 12000 },
        { label: "Bathroom Remodel", good: 0, fine: 3000, bad: 7000 },
        { label: "Flooring", good: 0, fine: 2000, bad: 5000 },
        { label: "Windows", good: 0, fine: 1500, bad: 4000 },
        { label: "Paint (Interior/Exterior)", good: 0, fine: 1200, bad: 3500 },
        { label: "Landscaping", good: 0, fine: 800, bad: 2000 },
      ];

      const els = {
        // Repairs
        repairTableBody: document.querySelector("#repairTable tbody"),
        repairTotal: document.getElementById("repairTotal"),
        repairCosts: document.getElementById("repairCosts"),

        // ARV
        arv: document.getElementById("arv"),
        comp1: document.getElementById("comp1"),
        comp2: document.getElementById("comp2"),
        comp3: document.getElementById("comp3"),
        arvResult: document.getElementById("arvResult"),
        estimateArvBtn: document.getElementById("estimateArvBtn"),

        // Wholesaling
        contractPrice: document.getElementById("contractPrice"),
        endBuyerPrice: document.getElementById("endBuyerPrice"),
        calcWholesaleBtn: document.getElementById("calcWholesaleBtn"),
        result: document.getElementById("result"),
      };

      function formatMoney(n) {
        if (Number.isNaN(n)) return "";
        return n.toLocaleString(undefined, { maximumFractionDigits: 2 });
      }

      function updateRepairTotal() {
        let total = 0;

        repairItems.forEach((item, idx) => {
          const radios = document.getElementsByName(`repair${idx}`);
          let val = "good";
          radios.forEach((r) => {
            if (r.checked) val = r.value;
          });
          total += item[val];
        });

        els.repairTotal.textContent = formatMoney(total);
        els.repairCosts.value = total;
      }

      function renderRepairTable() {
        els.repairTableBody.innerHTML = "";

        repairItems.forEach((item, idx) => {
          const tr = document.createElement("tr");

          tr.innerHTML = `
            <td>${item.label}</td>
            <td><input type="radio" name="repair${idx}" value="good" checked></td>
            <td><input type="radio" name="repair${idx}" value="fine"></td>
            <td><input type="radio" name="repair${idx}" value="bad"></td>
          `;

          tr.querySelectorAll('input[type="radio"]').forEach((radio) => {
            radio.addEventListener("change", updateRepairTotal);
          });

          els.repairTableBody.appendChild(tr);
        });

        updateRepairTotal();
      }

      function calculateARV() {
        const comp1 = parseFloat(els.comp1.value);
        const comp2 = parseFloat(els.comp2.value);
        const comp3 = parseFloat(els.comp3.value);

        const comps = [comp1, comp2, comp3].filter((x) => !Number.isNaN(x));

        if (comps.length === 0) {
          els.arvResult.textContent = "Enter at least one comparable sale.";
          return;
        }

        const arv = comps.reduce((a, b) => a + b, 0) / comps.length;

        els.arvResult.innerHTML = `<strong>Estimated ARV:</strong> $${formatMoney(arv)}`;
        els.arv.value = arv.toFixed(2);
      }

      function calculateWholesaling() {
        const arv = parseFloat(els.arv.value);
        const repairs = parseFloat(els.repairCosts.value);
        const contractPrice = parseFloat(els.contractPrice.value);
        const endBuyerPrice = parseFloat(els.endBuyerPrice.value);

        if (
          Number.isNaN(arv) ||
          Number.isNaN(repairs) ||
          Number.isNaN(contractPrice) ||
          Number.isNaN(endBuyerPrice)
        ) {
          els.result.textContent = "Please fill in ARV, Repairs, Contract Price, and End Buyer Price.";
          return;
        }

        // EXACT per your rules:
        // MAO = (ARV * 0.7) - Repairs
        const mao = arv * 0.7 - repairs;

        // End Buyer Price = Contract Price + Assignment Fee
        // Profit = Assignment Fee
        // Profit must equal End Buyer Price - Contract Price
        const assignmentFee = endBuyerPrice - contractPrice;
        const profit = assignmentFee;

        els.result.innerHTML = `
          <strong>MAO (Max Investor Purchase Price):</strong> $${formatMoney(mao)}<br />
          <strong>Assignment Fee (Profit):</strong> $${formatMoney(profit)}<br />
          <strong>End Buyer Price:</strong> $${formatMoney(endBuyerPrice)}<br />
          <strong>Contract Price:</strong> $${formatMoney(contractPrice)}
        `;
      }

      els.estimateArvBtn.addEventListener("click", calculateARV);
      els.calcWholesaleBtn.addEventListener("click", calculateWholesaling);

      renderRepairTable();
    </script>
  </body>
</html>
